@model dynamic

@{
    ViewData["Title"] = "Manage Queue";
}

<div class="row">
    <div class="col-md-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a asp-controller="Company" asp-action="Dashboard">Dashboard</a></li>
                <li class="breadcrumb-item active" aria-current="page">Manage Queue</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1>Main Dining Queue</h1>
                <p class="text-muted mb-0">Managing queue in real-time</p>
            </div>
            <div>
                <span class="badge bg-success fs-5">Open</span>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Queue Statistics</h4>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3">
                        <h2 class="text-primary">12</h2>
                        <p class="text-muted">In Queue</p>
                    </div>
                    <div class="col-md-3">
                        <h2 class="text-success">28</h2>
                        <p class="text-muted">Served Today</p>
                    </div>
                    <div class="col-md-3">
                        <h2 class="text-warning">45m</h2>
                        <p class="text-muted">Avg. Wait</p>
                    </div>
                    <div class="col-md-3">
                        <h2 class="text-info">5m</h2>
                        <p class="text-muted">Per Person</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="mb-0">Currently Waiting</h4>
                <button class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                    </svg>
                    Refresh
                </button>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Position</th>
                                <th>Name</th>
                                <th>Contact</th>
                                <th>Joined</th>
                                <th>Wait Time</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-warning">
                                <td><strong>#1</strong></td>
                                <td>John Doe</td>
                                <td>
                                    john@email.com<br />
                                    <small>(555) 123-4567</small>
                                </td>
                                <td>12:15 PM</td>
                                <td>48 min</td>
                                <td><span class="badge bg-warning">Notified</span></td>
                                <td>
                                    <button class="btn btn-success btn-sm">Call Next</button>
                                    <button class="btn btn-outline-danger btn-sm">Remove</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>#2</strong></td>
                                <td>Jane Smith</td>
                                <td>
                                    jane@email.com<br />
                                    <small>(555) 234-5678</small>
                                </td>
                                <td>12:22 PM</td>
                                <td>41 min</td>
                                <td><span class="badge bg-primary">Waiting</span></td>
                                <td>
                                    <button class="btn btn-info btn-sm">Notify</button>
                                    <button class="btn btn-outline-danger btn-sm">Remove</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>#3</strong></td>
                                <td>Bob Johnson</td>
                                <td>
                                    bob@email.com<br />
                                    <small>(555) 345-6789</small>
                                </td>
                                <td>12:30 PM</td>
                                <td>33 min</td>
                                <td><span class="badge bg-primary">Waiting</span></td>
                                <td>
                                    <button class="btn btn-info btn-sm">Notify</button>
                                    <button class="btn btn-outline-danger btn-sm">Remove</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#4</td>
                                <td>Alice Brown</td>
                                <td>
                                    alice@email.com<br />
                                    <small>(555) 456-7890</small>
                                </td>
                                <td>12:38 PM</td>
                                <td>25 min</td>
                                <td><span class="badge bg-primary">Waiting</span></td>
                                <td>
                                    <button class="btn btn-info btn-sm">Notify</button>
                                    <button class="btn btn-outline-danger btn-sm">Remove</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#5</td>
                                <td>Charlie Davis</td>
                                <td>
                                    charlie@email.com<br />
                                    <small>No phone</small>
                                </td>
                                <td>12:45 PM</td>
                                <td>18 min</td>
                                <td><span class="badge bg-primary">Waiting</span></td>
                                <td>
                                    <button class="btn btn-info btn-sm">Notify</button>
                                    <button class="btn btn-outline-danger btn-sm">Remove</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#6</td>
                                <td>Diana Evans</td>
                                <td>
                                    diana@email.com<br />
                                    <small>(555) 567-8901</small>
                                </td>
                                <td>12:52 PM</td>
                                <td>11 min</td>
                                <td><span class="badge bg-primary">Waiting</span></td>
                                <td>
                                    <button class="btn btn-info btn-sm">Notify</button>
                                    <button class="btn btn-outline-danger btn-sm">Remove</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">Recent Activity</h4>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <span class="badge bg-success">1:02 PM</span> 
                        <strong>Mike Wilson</strong> was served (waited 52 min)
                    </li>
                    <li class="list-group-item">
                        <span class="badge bg-primary">1:00 PM</span> 
                        <strong>Diana Evans</strong> joined the queue
                    </li>
                    <li class="list-group-item">
                        <span class="badge bg-success">12:58 PM</span> 
                        <strong>Sarah Miller</strong> was served (waited 38 min)
                    </li>
                    <li class="list-group-item">
                        <span class="badge bg-warning">12:55 PM</span> 
                        <strong>Tom Harris</strong> left the queue
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card mb-3">
            <div class="card-header">
                <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
                <button class="btn btn-success btn-lg w-100 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-check" viewBox="0 0 16 16">
                        <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>
                        <path d="M8.256 14a4.474 4.474 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10c.26 0 .507.009.74.025.226-.341.496-.65.804-.918C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4s1 1 1 1h5.256Z"/>
                    </svg>
                    Call Next Customer
                </button>
                
                <button class="btn btn-warning w-100 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/>
                    </svg>
                    Pause Queue
                </button>
                
                <button class="btn btn-secondary w-100 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
                        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                    </svg>
                    Notify All (Top 3)
                </button>
                
                <hr />
                
                <a href="#" class="btn btn-outline-primary w-100 mb-2">View QR Code</a>
                <a href="#" class="btn btn-outline-secondary w-100">Edit Queue Settings</a>
            </div>
        </div>

        <div class="card mb-3">
            <div class="card-header">
                <h5 class="mb-0">QR Code</h5>
            </div>
            <div class="card-body text-center">
                <div style="background-color: #f0f0f0; padding: 30px; margin: 10px 0;">
                    <p class="text-muted">[QR Code Preview]</p>
                </div>
                <button class="btn btn-sm btn-primary w-100 mt-2">Download QR Code</button>
                <button class="btn btn-sm btn-outline-secondary w-100 mt-1">Print QR Code</button>
            </div>
        </div>

        <div class="alert alert-info">
            <h6>Tips:</h6>
            <ul class="small mb-0">
                <li>Call customers in order</li>
                <li>Remove no-shows to keep queue moving</li>
                <li>Notify top 3 when you're ready</li>
                <li>Pause queue during breaks</li>
            </ul>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Simulate real-time updates (for prototype)
        console.log('Queue management page loaded');
        
        // Add click handlers for buttons
        document.querySelectorAll('.btn-success').forEach(btn => {
            btn.addEventListener('click', function() {
                if(confirm('Mark this customer as served?')) {
                    alert('Customer marked as served! (Prototype - no actual action taken)');
                }
            });
        });
        
        document.querySelectorAll('.btn-outline-danger').forEach(btn => {
            btn.addEventListener('click', function() {
                if(confirm('Remove this customer from the queue?')) {
                    alert('Customer removed! (Prototype - no actual action taken)');
                }
            });
        });
    </script>
}
